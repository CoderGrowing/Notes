## 集合框架

Java中的集合是能够存放其他对象的一种对象，它相当于一个容器，提供了保存、删除、修改其中元素的方法。

集合框架最长用的接口是Collection接口，它允许对象容纳其他对象。还有Iterator和Comparator接口，分别让对象变得可迭代和可比较。还有一个Map接口，可以用来保存键值对。

### 1. Collection接口

Collection接口允许对象集中存放在一起。它提供了很多有用的方法，例如：

- `add()`：添加元素
- `addAll()`：添加另一个Collection的所有成员
- `clear()`：删除所有元素
- `size()`：返回元素数量
- `isEmpty()`：测试该集合是否包含元素

#### 1.1 ArrayList

List是Collection中最常用的子接口，而ArrayList是List最常用的实现。

- 构造器：默认的无参构造器初始容量为10，随着元素添加进去不断扩大。实现知道容量的话可以指定容量大小，`public ArrayList(int initialCapacity)`。注意创建ArrayList对象时通常是将ArrayList对象赋值给一个List引用变量：`List list = new ArrayList()`。
- 添加元素：除了直接添加外还可以指定索引，`public void add (int index, Object element)`。
- 修改元素：`public Object set(int index, Object element)`
- 删除：`public Object remove(int index)`

#### 1.2 迭代Collection

#### 1.3 Set和HashSet

Set类似于List，但Set不允许重复。Set的一些实现允许有null元素，一些不允许。HashSet是常用的Set实现，它允许有一个null元素存在。

#### 1.4 Queue和LinkedList

LinkedList是Queue的一种实现。Queue支持FIFO（先进先出）的原则。常用方法如下：

- offer：类似add方法，但它在添加元素有可能失败时调用。若添加失败，返回false，add添加失败时则返回异常。
- remove：删除并返回Queue最前端的那个元素，若Queue为空时抛出异常
- poll：同remove，但Queue为空时返回null
- element：返回但不删除Queue最前端的元素，若Queue为空抛出异常
- peek：同element，但Queue为空时它返回null

### 2. Map接口

Map是保存键/值对的地方，键不允许重复，每个键只能映射到一个值。

- 添加一个键值对用put方法：`public void put (Object key, Object value)`。需要注意的是，键和值都不能是基本类型，但类似`put(1, 100)`这样的调用是合法的。因为在调用之前进行了自动装箱。
- 添加一个Map用putAll方法：`public putAll(Map map)`。
- 删除所有键和值：clear方法
- 键值数量：size方法
- 是否为空：isEmpty方法
- 获取一个值：将键传递给get()方法
- 获取所有键：keySet()方法，返回一个Set类型
- 获取所有值：values()方法，返回一个Collection

java.util包中有好几个Map实现，最长用的是HashMap和HashTable。它们的区别在于HashMap不同步，HashTable是同步的。

### 3. 对象比较和排序

java.util.Arrays类提供了sort方法，可以对任意的对象数组进行排序：`public static void sort (Object[] a)`。sort方法排序的依据是对象的`compareTo`方法，该方法是Comparable接口定义的方法，任何想要排序的对象都必须实现该方法。

`public int compareTo(Object obj)`该方法的参数是与当前对象比较的对象，若当前对象大于参数对象，返回一个正值，相等返回0，小于则返回一个负值。

```java
public class Elephant implements Comparable {
    public float weight;
    public int age;
    public float tuskLength;
    
    public int comparTo(Object obj) {
        Elephant anotherElephant = (Elephant) obj;
        if (this.weight > anotherElephant.weight)
            return 1;
        else if (this.weight < anotherElephant.weight)
            return -1;
        else
            return (this.age - anotherElephant.age); // 体重相等就比较年龄
    }
}
```

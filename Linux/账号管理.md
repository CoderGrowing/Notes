## 账号管理

### 1. /etc/passwd 文件结构解析

/etc/passwd 文件时 Linux 用来记录拥有系统访问权的注册用户信息的文件。我们看一下这个文件都有什么内容：

```bash
cat /etc/passwd | sort -t ":" -n -k 3 | head -n 2

# root:x:0:0:root:/root:/bin/bash
# daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
```

这个文件每一行都代表了一个账号，每行有七个字段，以“：”分隔“。每个字段的含义如下：

1. 账号名称，与对应的 UID 相关联

2. 密码，早期的 Unix 系统密码放在这个字段，现在移动到了 /etc/shadow 文件下，此处以 x 代替

3. UID，用户标识符。不同的标识符拥有不同的含义。

   0：系统管理员，将用户的 UID 设置为 0 时用户拥有管理员的权限

   1~499：系统账号，系统运行必要的服务所需要的账号

   500~65535：一般用户使用的账号

4. GID，用户组的标识符，与 /etc/group 有关

5. 用户信息说明列，记录账号的意义

6. 用户主文件夹所在的目录

7. 用户的默认 shell

### 2. 账号管理

#### 2.1 新增用户

新增用户用到的命令是 useradd，参数如下：

-u：接 UID

-g：初始用户组

-G：接这个用户还可以加入的用户组

-M：强制！不要创建用户主文件夹（系统账号默认）

-m：强制，创建用户主文件夹（一般账号默认）

-c：即 /etc/passwd 第五列的说明内容

-d：指定用户的主目录

-r：创建一个系统账号（UID 有限制，可参考 /etc/login.defs）

-s：指定用户的默认 shell




# 索引

## 1. 索引的基本概念

许多查询只涉及关系中的少量记录，如找出关系中 ID 为某值的教师姓名。每次查询均需要对整个关系进行读取十分低效。为了改进查询方式，数据库系统引入了索引的概念。

索引类似于书的索引：先找到特定主体的内容，找到页码，再在该页码中寻找需要的内容。

基本的索引类型：

- 顺序索引：基于值的顺序排序
- 散列索引：基于将值平均分布到若干散列桶中

评价索引性能的几个方面：

- 访问类型：能有效支持的访问类型，包括找到具有特定属性值的记录、找到属性值在某个特定范围内的记录等
- 访问时间
- 插入时间
- 删除时间
- 空间开销

用于在文件中查找记录的属性或者属性集称为**搜索码（search key）**。如果一个文件上有多个索引，那么它就有多个搜索码。

## 2. 顺序索引

如果包含记录的文件按照某个搜索码指定的顺序排序，那么该搜索码对应的索引称为**聚集索引（clustering index）**。聚集索引也称为**主索引（primary index）**。主索引通常是建立在主键上的索引，但并非必须如此。与此相对，搜索码指定的顺序与文件记录的物理顺序不同的索引称为**非聚集索引（nonclustering index）**或者**辅助索引（secondary index）**。

### 2.1 稠密索引和稀疏索引

索引项（index entry）或者索引记录（index record）由一个搜索码值和指向具有该搜索码值的一条或者多条记录的指针构成。指向记录的指针包括磁盘块的标识和标识磁盘块内记录的块内偏移量。

- 稠密索引（dense index）：在稠密索引中，文件中的每个搜索码值都有一个索引项
- 稀疏索引（sparse index）：在稀疏索引中，值为搜索码的某些值建立索引项

如英文字典，如果为每个单词都建立索引，就是稠密索引；只记录字幕 a-z 对应的开始页码，就是稀疏索引。通常，稠密索引拥有更好的性能，但它耗费更多的空间，而且在插入和删除时所需的维护开销也较大。

### 2.2 辅助索引

